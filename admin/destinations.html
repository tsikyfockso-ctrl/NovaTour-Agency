<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<title>Destinations CMS</title>
<link rel="stylesheet" href="admin.css">
</head>
<body onload="protect()">

<header>
  <h2>Destinations</h2>
  <button onclick="back()">â¬… Retour</button>
</header>

<div class="editor-container">
  <div id="destination-list"></div>
  <button onclick="addDestination()">â• Ajouter Destination</button>
  <button onclick="saveDestinations()">ğŸ’¾ Sauvegarder</button>
</div>

<script>
protect();

let destinations = [
  {name:"Nosy Be", description:"Ãle paradisiaque", image:"images/destination1.jpg"},
  {name:"Paris", description:"Ville de lâ€™amour", image:"images/destination2.jpg"}
];

function renderDestinations() {
  const container = document.getElementById("destination-list");
  container.innerHTML = "";
  destinations.forEach((d,i)=>{
    const div = document.createElement("div");
    div.className = "dest-item";
    div.innerHTML = `
      <input placeholder="Nom" value="${d.name}" onchange="destinations[${i}].name=this.value">
      <input placeholder="Description" value="${d.description}" onchange="destinations[${i}].description=this.value">
      <input placeholder="URL Image" value="${d.image}" onchange="destinations[${i}].image=this.value">
      <button onclick="deleteDestination(${i})">âŒ Supprimer</button>
      <hr>
    `;
    container.appendChild(div);
  });
}

function addDestination() {
  destinations.push({name:"", description:"", image:""});
  renderDestinations();
}

function deleteDestination(i) {
  destinations.splice(i,1);
  renderDestinations();
}

function saveDestinations() {
  alert("Copiez ce JSON et collez-le dans destinations.json sur GitHub :\n\n" + JSON.stringify(destinations,null,2));
}

renderDestinations();
</script>
<script src="cms.js"></script>
</body>
</html>
